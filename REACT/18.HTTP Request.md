# [Network] HTTP Request/Response 란

## HTTP(HyperText Transfer Protocol)

HTTP란 텍스트 기반의 통신규약으로 **인터넷에서 데이터를 주고받을 수 있는 프로토콜**이다. 이러한 규약을 통해 프로그램들이 규악에 맞춰 개발해서 서로 정보를 교환할 수 있게 되었다.<br/>

그렇다면 여기서 **프로토콜**이란 **컴퓨터 내부에서, 또는 컴퓨터 사이에서 데이터의 교환 방식을 정의하는 규칙 체계**입니다.

## HTTP 동작

클라이언트가 브라우저를 통해서 어떠한 서비스 url을 통하거나 다른 방법으로 요청(request)를 하면, 서버에서는 해당 요청사항에 맞는 결과를 찾아서 사용자에게 응답(response)하는 형태로 동작한다.

HTML 문서만이 HTTP 통신을 위한 유일한 정보 문서는 아니다. Plain text로 부터 JSON 데이터 및 XML과 같은 형태의 정보도 주고 받을 수 있으며, 보통은 클라이언트가 어떤 정보를 HTML 형태로 받고 싶은지, JSON 형태로 받고 싶은지 명시해주는 경우가 많다.

## Request/Response

### Request

**클라이언트가 서버에게 연락**하는 것을 요청이라고 하며, 요청을 보낼때는 요청에 대한 정보를 담아 서버로 보낸다.

- Request Method (요청의 종류)

GET, HEAD, POST, PUT, PATCH, DELETE, TRACE, OPTION, CONNECT 등이 있다.

#### GET

```
- 리소스를 검색하고, 반환받기 위해 사용되는 메소드
- 원하는 정보를 서버에 요청할 때 쓰임
- (일반적으로) 리소스의 위치를 URL에서 쿼리로 표현하기 때문에 RequestBody가 없음
```

#### HEAD

```
- 서버의 각종 정보를 확인하기 위해 사용되는 메소드
- GET과 동일하지만, response에 Body가 없고 response Code와 Head만 응답
```

#### POST

```
- 요청된 자원을 생성하기 위해 사용되는 메소드
- POST로 정보를 전송하면 URL에 파라미터가 나타나지 않으므로 각종 데이터를 전송하는데 쓰임
```

#### PUT

```
- 요청된 자원을 수정하기 위해 사용되는 메소드
```

#### PATCH

```
- 요청된 자원을 수정하기 위해 사용되는 메소드라는 점에서 PUT과 같지만, 해당 자원 전체를 수정하는 PUT과는 다르게 PATCH는 해당 자원의 일부 부분을 수정한다.
```

#### DELETE

```
- 요청된 자원을 삭제하기 위해 사용되는 메소드
- 클라이언트에서 서버의 자원을 삭제할 수 있도록 허가하는 것은 매우 위험
- 현실적으로 사용될 일이 거의 없고, 대부분의 서버는 이 메소드를 비활성화시킴
- (일반적으로) 삭제 대신 delete flag를 수정하는 방법을 사용
```

#### TRACE

```
- 루프백 메시지를 호출하기 위해 테스트용으로 사용되는 메소드
```

#### OPTION

```
- 웹서버에서 지원하는 메소드를 알기 위해 사용되는 메소드
```

#### CONNECT

```
- 프록시 기능을 요청할 때 사용되는 메소드
```

### Response

**서버가 요청에 대한 답변을 클라이언트에게 보내는 것**을 응답이라고 한다.

#### Status Line

1. HTTP Version: 요청의 HTTP버전과 동일
2. Status Code: 응답 메세지의 상태 코드

```
상태 코드는 크게 5가지 부류로 나눌 수 있다.

- 1xx (조건부 응답) : 요청을 받았으며 작업을 계속한다.
- 2xx (성공) : 클라이언트가 요청한 동작을 수신하여 이해했고 승낙했으며, 성공적으로 처리했음을 가리킨다.
- 3xx (리다이렉션 완료) : 클라이언트는 요청을 마치기 위해 추가 동작을 취해야 한다.
- 4xx (요청 오류) : 클라이언트에 오류가 있음을 나타낸다.
- 5xx (서버 오류) : 서버가 유요한 요청을 명백하게 수행하지 못했음을 나타낸다.
```

3. Status Text: 응답 메세지의 상태를 간략하게 설명해주는 텍스트
<hr/>

### Header

요청의 헤더와 동일하다. 응답의 추가 정보(메타 데이터)를 담고있는 부분입니다.

### Body

Body: 요청의 Body와 일반적으로 동일합니다. 요청의 메소드에 따라 Body가 항상 존재하지 않듯이. 응답도 응답의 형태에 따라 데이터를 전송할 필요가 없는 경우엔 Body가 없을 수도 있습니다. 가장 많이 사용되는 Body 의 데이터 타입은 JSON(JavaScript Object Notation) 입니다.

```
Body: {
  "message": "SUCCESS"
  "token": "kldiduajsadm@9df0asmzm" (암호화된 유저의 정보)
}

로그인 요청에 대해 성공했을 때 응답의 내용
```

## Response Status Codes

실제 프로젝트를 진행할 때 가장 많이 보게 될 응답의 상태 코드 들입니다. Status Code의 숫자에 각각 의미가 내포되어 있습니다. 이 Status Code 만 보아도 응답이 제대로 됐는지 안 됐는지를 파악할 수 있습니다.

- 200: OK

  - 가장 자주 보게되는 Status Code
  - 문제없이 요청에 대한 처리가 백엔드 서버에서 이루어지고 나서 오는 응답코드
  - 우리는 모두 200 OK 를 원한다

- 201: Created

  - 무언가가 잘 생성되었을 때에(Successfully Created) 오는 Status Code
  - 대게 POST 메소드의 요청에 따라 백엔드 서버에 데이터가 잘 생성 또는 수정 되었을 때에 보내는 코드

- 400: Bad Request

  - 해당 요청이 잘못되었을 때 보내는 Status Code
  - 주로 요청의 Body에 보내는 내용이 잘못되었을 때 사용되는 코드
    ex) 전화번호를 보내야 하는데 숫자가 아닌 문자열의 주소가 대신 Body에 담겼을 경우

- 401: Unauthorized

  - 저가 해당 요청을 진행하려면 먼저 로그인을 하거나 회원가입이 필요하다는 의미
    ex) wish list, 좋아요 기능은 회원이 아니면 요청을 보낼 수 없음

- 403: Forbidden

  - 유저가 해당 요청에 대한 권한이 없다는 뜻
  - 접근 불가능한 정보에 접근했을 경우
  - ex) 오직 유료회원만 접근할 수 있는 데이터를 요청 했을 때

- 유저가 해당 요청에 대한 권한이 없다는 뜻

  - 접근 불가능한 정보에 접근했을 경우
    ex) 오직 유료회원만 접근할 수 있는 데이터를 요청 했을 때

- 500: Internal Server Error
  - 서버에서 에러가 났을 때의 Status Code
    API 개발을 하는 백엔드 개발자들이 싫어하는 코드
